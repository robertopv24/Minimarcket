# Minimarket POS - Sistema de GestiÃ³n Integral

## âš ï¸ LICENCIA PROPIETARIA - TODOS LOS DERECHOS RESERVADOS

**Copyright Â© 2025 [Roberto J. Perozo V.]**

Este software y su cÃ³digo fuente son propiedad intelectual exclusiva del autor. 
Se prohÃ­be expresamente sin autorizaciÃ³n por escrito:

- La distribuciÃ³n total o parcial del cÃ³digo
- La modificaciÃ³n, ingenierÃ­a inversa o descompilaciÃ³n
- El uso comercial en mÃºltiples establecimientos
- La copia para cualquier fin diferente al uso autorizado
- La incorporaciÃ³n en otros proyectos o sistemas
- La venta, alquiler o cesiÃ³n de licencias no autorizadas
- La publicaciÃ³n en repositorios pÃºblicos o compartidos

El uso de este software estÃ¡ limitado al establecimiento o negocio para el cual 
fue originalmente desarrollado o autorizado. Cada instalaciÃ³n adicional requiere 
una licencia por separado.

Para obtener una licencia comercial o permiso de uso, contacte directamente al 
propietario mediante los canales oficiales.

**Advertencia:** El incumplimiento de estos tÃ©rminos constituye violaciÃ³n de 
derechos de autor y puede resultar en acciones legales.

---

## ğŸ“‹ DescripciÃ³n del Sistema

**Minimarket POS** es un sistema de gestiÃ³n empresarial completo diseÃ±ado 
especÃ­ficamente para minimercados, pequeÃ±as tiendas, cafeterÃ­as y negocios de 
alimentos. La plataforma integra todas las operaciones comerciales en una 
soluciÃ³n unificada que abarca punto de venta, control de inventario, gestiÃ³n de 
compras, producciÃ³n, tesorerÃ­a y anÃ¡lisis financiero avanzado.

Desarrollado con arquitectura modular y enfoque en usabilidad, el sistema 
optimiza las operaciones diarias, reduce errores humanos, proporciona control 
financiero detallado y ofrece visibilidad completa del negocio en tiempo real.

## ğŸ¯ CaracterÃ­sticas Principales

### 1. ğŸ›’ **Punto de Venta (POS) Avanzado**
- **Interfaz TÃ¡ctil Optimizada:** DiseÃ±ada para uso rÃ¡pido en entorno comercial
- **Carrito Inteligente:** GestiÃ³n de productos simples, preparados y combos
- **Sistema de Modificaciones:** Agregar/eliminar ingredientes, notas especiales por Ã­tem
- **Consumo MÃºltiple:** Opciones para consumo en local (mesa) o para llevar con lÃ³gica diferenciada
- **MÃºltiples MÃ©todos de Pago:** Efectivo (USD/VES), transferencias bancarias, pago mÃ³vil, Zelle
- **CÃ¡lculo AutomÃ¡tico de Vueltos:** En ambas monedas con tasa de cambio actualizada
- **ImpresiÃ³n AutomÃ¡tica:** Tickets para cliente y cocina simultÃ¡neamente
- **Pantalla Cocina (KDS):** Sistema de display para Ã³rdenes en preparaciÃ³n
- **GestiÃ³n de Mesas:** AsignaciÃ³n y seguimiento (para restaurantes/cafeterÃ­as)

### 2. ğŸ“¦ **GestiÃ³n de Inventario Inteligente**
- **Tipos de Productos Multi-nivel:**
  - **Simples:** Stock fÃ­sico directo (refrescos, snacks, enlatados)
  - **Preparados:** Descuento automÃ¡tico de ingredientes segÃºn receta (pizzas, perros calientes, platos)
  - **Combos/Paquetes:** AgrupaciÃ³n de productos con precio especial y descuento implÃ­cito
- **Control de Stock en Tiempo Real:** ActualizaciÃ³n inmediata tras ventas, compras o producciÃ³n
- **Stock Virtual Calculado:** Para productos preparados, basado en disponibilidad de ingredientes
- **Alertas de Stock Bajo:** Configurables por producto con notificaciones visibles
- **ValorizaciÃ³n de Inventario:** En USD y Bs con cÃ¡lculo automÃ¡tico
- **RotaciÃ³n de Productos:** Seguimiento de movimientos y antigÃ¼edad
- **GestiÃ³n de Lotes:** Control bÃ¡sico de caducidad (implementable)

### 3. ğŸ­ **Sistema de ProducciÃ³n y Recetas**
- **GestiÃ³n de Materias Primas:** ClasificaciÃ³n en ingredientes directos e indirectos (insumos)
- **Recetas Detalladas:** Componentes por tipo (materia prima, productos de cocina, productos finales)
- **Costeo AutomÃ¡tico:** CÃ¡lculo de costo unitario promediado por producciÃ³n
- **Registro de ProducciÃ³n:** Descuento automÃ¡tico de ingredientes, actualizaciÃ³n de stock
- **Control de Calidad:** Trazabilidad de producciÃ³n por lote y responsable
- **Recetas Multi-nivel:** Productos que usan otros productos manufacturados
- **Extras Permitidos:** ConfiguraciÃ³n de ingredientes adicionales con precio extra
- **Mermas y Rendimientos:** Control de desperdicios y eficiencia productiva

### 4. ğŸ’° **TesorerÃ­a y Control Financiero Integral**
- **Caja Diaria por Usuario:** Apertura, operaciÃ³n y cierre individual por cajero
- **BÃ³veda Central:** Custodia de efectivo principal del negocio
- **MÃºltiples MÃ©todos de Pago:** Configurables por moneda (USD, VES) y tipo (efectivo, bancario, electrÃ³nico)
- **Transacciones Automatizadas:** Registro contable automÃ¡tico de todas las operaciones
- **Movimientos de Fondos:** DepÃ³sitos, retiros, transferencias internas con trazabilidad
- **AuditorÃ­a Completa:** Historial detallado de todos los movimientos con usuario y timestamp
- **Cuadre de Caja:** CÃ¡lculo automÃ¡tico de lo esperado vs. lo contado
- **Diferencia de Cuadre:** IdentificaciÃ³n y registro de sobrantes/faltantes
- **Cierre de Turno:** Reporte detallado por mÃ©todo de pago y moneda

### 5. ğŸ“Š **Compras y GestiÃ³n de Proveedores**
- **Ã“rdenes de Compra:** CreaciÃ³n, seguimiento y recepciÃ³n con mÃºltiples productos
- **IntegraciÃ³n Contable:** Pago automÃ¡tico desde tesorerÃ­a al registrar compra
- **GestiÃ³n de Proveedores:** Datos completos (contacto, direcciÃ³n, histÃ³rico)
- **RecepciÃ³n de MercancÃ­a:** ActualizaciÃ³n automÃ¡tica de stock y recalculo de precios de venta
- **Control de Estado:** Pendiente, recibido, cancelado con fechas estimadas vs. reales
- **HistÃ³rico de Compras:** AnÃ¡lisis de gastos por proveedor y perÃ­odo
- **ComparaciÃ³n de Precios:** Seguimiento de costos unitarios por producto
- **Pedidos AutomÃ¡ticos:** Sugerencias basadas en stock mÃ­nimo (funcionalidad bÃ¡sica)

### 6. ğŸ“ˆ **Reportes y Business Intelligence**
- **Dashboard Ejecutivo:** KPIs en tiempo real (ventas hoy, semana, mes, aÃ±o)
- **Reporte de Rentabilidad:** Margen bruto y neto por perÃ­odo con desglose de costos
- **AnÃ¡lisis de Ventas:** Por producto, mÃ©todo de pago, hora del dÃ­a, cajero
- **AuditorÃ­a de Caja:** Diferencias y cuadres histÃ³ricos por usuario
- **Top Productos:** MÃ¡s vendidos por volumen e ingresos con tendencias
- **Estado Operativo:** Alertas y mÃ©tricas crÃ­ticas (stock bajo, pedidos pendientes)
- **DistribuciÃ³n de Ingresos:** Por mÃ©todo de pago y tipo de producto
- **Reporte de Compras:** AnÃ¡lisis de gastos y comparativa con ventas
- **Utilidad por Producto:** CÃ¡lculo de margen individual basado en costos actuales

### 7. ğŸ‘¥ **GestiÃ³n de Usuarios y Seguridad**
- **Roles Definidos:** Administrador (acceso total) y Cajero/Usuario (operativo)
- **Control de Acceso Granular:** Por mÃ³dulos y funciones especÃ­ficas
- **AutenticaciÃ³n Segura:** Hash SHA256 para contraseÃ±as, sesiones protegidas
- **Registro de Actividades:** Trazabilidad de operaciones por usuario
- **Perfiles de Usuario:** Datos personales, contacto, documento de identidad
- **Reset de ContraseÃ±as:** Sistema seguro con validaciones
- **Bloqueo por Intentos:** ProtecciÃ³n contra fuerza bruta
- **Sesiones Concurrentes:** Control para evitar accesos duplicados

### 8. âš™ï¸ **ConfiguraciÃ³n y PersonalizaciÃ³n**
- **Tasa de Cambio DinÃ¡mica:** ActualizaciÃ³n en tiempo real con recalculo automÃ¡tico de precios
- **MÃ¡rgenes de Ganancia:** Configurables por producto con override individual
- **ImpresiÃ³n Personalizada:** Formatos de ticket configurables (cabecera, mensajes, logo)
- **Monedas Soportadas:** USD y VES con conversiÃ³n automÃ¡tica
- **CategorÃ­as de Productos:** OrganizaciÃ³n visual y reportes por categorÃ­a
- **Almacenes MÃºltiples:** Estructura bÃ¡sica para expansiÃ³n multi-sucursal
- **Backup AutomÃ¡tico:** ConfiguraciÃ³n de respaldos programados
- **ParÃ¡metros del Sistema:** ConfiguraciÃ³n centralizada en base de datos

## ğŸ› ï¸ Arquitectura TÃ©cnica

### **Backend - NÃºcleo del Sistema**
- **Lenguaje:** PHP 7.4+ (Compatible con PHP 8.x)
- **Paradigma:** ProgramaciÃ³n Orientada a Objetos (POO) estricta
- **PatrÃ³n ArquitectÃ³nico:** Modelo-Vista-Controlador (MVC) personalizado
- **Base de Datos:** MySQL 5.7+ / MariaDB 10.3+ (InnoDB engine)
- **ConexiÃ³n a BD:** PDO (PHP Data Objects) con prepared statements
- **Manejo de Errores:** Logging exhaustivo a archivo y base de datos
- **Transacciones:** Operaciones atÃ³micas para integridad financiera
- **Sesiones:** PHP Native Sessions con regeneraciÃ³n de ID
- **Autoloading:** Carga automÃ¡tica de clases y dependencias

### **Frontend - Interfaz de Usuario**
- **HTML5:** Estructura semÃ¡ntica y accesible
- **CSS3:** Bootstrap 5.2.3 + personalizaciones especÃ­ficas
- **JavaScript:** Vanilla ES6+ (sin frameworks pesados)
- **AJAX:** Fetch API para operaciones asÃ­ncronas
- **Responsive Design:** Adaptable a tablets, laptops y pantallas tÃ¡ctiles
- **IconografÃ­a:** Font Awesome 6.4.0
- **Fuentes:** Sistema default con fallback a sans-serif
- **Temas:** Claro/oscuro bÃ¡sico (implementable)

### **Integraciones y Servicios**
- **ImpresiÃ³n:** CUPS (Common UNIX Printing System) para tickets tÃ©rmicos
- **Email:** PHPMailer para notificaciones y reportes automÃ¡ticos
- **APIs RESTful:** Endpoints AJAX para operaciones especÃ­ficas
- **Sistema de Archivos:** GestiÃ³n local con estructura organizada
- **Upload de ImÃ¡genes:** Procesamiento y optimizaciÃ³n bÃ¡sica
- **Cron Jobs:** Tareas programadas para backups y reportes

### **Base de Datos - Esquema**
- **25+ Tablas Relacionales:** Normalizadas hasta 3NF
- **Claves ForÃ¡neas:** Integridad referencial con ON DELETE CASCADE
- **Ãndices Optimizados:** Para consultas frecuentes y reportes
- **Vistas:** Para consultas complejas y reportes
- **Triggers:** Para auditorÃ­a y mantenimiento de datos
- **Backups:** Estructura para respaldos incrementales

## ğŸ“‹ Requisitos del Sistema

### **Requisitos MÃ­nimos (Entorno de ProducciÃ³n)**
```
Servidor Web:
  - Apache 2.4+ o Nginx 1.18+
  - PHP 7.4.0 o superior
  - Extensiones PHP requeridas:
    â€¢ PDO MySQL
    â€¢ GD (para procesamiento de imÃ¡genes)
    â€¢ OpenSSL
    â€¢ MBString
    â€¢ JSON
    â€¢ Session
    â€¢ cURL (recomendado)
  
Base de Datos:
  - MySQL 5.7.7+ o MariaDB 10.3+
  - InnoDB como motor de almacenamiento
  - UTF8mb4 para soporte completo de caracteres
  - 100MB mÃ­nimo de espacio libre
  
Servidor:
  - 1GB RAM mÃ­nimo
  - 2GB espacio en disco
  - Procesador de 2 nÃºcleos
  - Linux/Unix (recomendado) o Windows Server
  
Cliente/Navegador:
  - Chrome 80+, Firefox 75+, Safari 14+, Edge 80+
  - JavaScript habilitado
  - ResoluciÃ³n mÃ­nima: 1024x768
  - ConexiÃ³n a red local estable
```

### **Requisitos Recomendados (Alto Rendimiento)**
```
Servidor Web:
  - Apache 2.4+ con mod_php o PHP-FPM
  - PHP 8.1+ con OPCache habilitado
  - Memcached o Redis para sesiones (opcional)
  
Base de Datos:
  - MySQL 8.0+ o MariaDB 10.6+
  - 4GB RAM dedicada
  - SSD para almacenamiento
  - Backup automÃ¡tico configurado
  
Servidor:
  - 4GB RAM o mÃ¡s
  - 10GB espacio en disco (para logs y backups)
  - Procesador de 4 nÃºcleos
  - Sistema operativo Linux (Ubuntu LTS, CentOS)
  - Firewall configurado (iptables/ufw)
  
Red:
  - ConexiÃ³n cableada para estaciones POS
  - Wi-Fi para dispositivos mÃ³viles (opcional)
  - Switch gestionado para segmentaciÃ³n (opcional)
  
ImpresiÃ³n:
  - Impresora tÃ©rmica de 80mm compatible con ESC/POS
  - CUPS configurado y probado
  - Papel tÃ©rmico de calidad
```

### **Requisitos de Desarrollo**
```
- Git para control de versiones
- Editor de cÃ³digo (VS Code, PHPStorm, Sublime)
- XAMPP/WAMP/MAMP o Docker para entorno local
- phpMyAdmin o Adminer para gestiÃ³n de BD
- Navegadores mÃºltiples para testing
- Herramientas de debugging (Xdebug)
```

## ğŸš€ InstalaciÃ³n y ConfiguraciÃ³n

### **Paso 1: PreparaciÃ³n del Servidor**

```bash
# Actualizar sistema (Ubuntu/Debian ejemplo)
sudo apt update && sudo apt upgrade -y

# Instalar Apache, PHP y extensiones
sudo apt install apache2 php libapache2-mod-php php-mysql php-gd php-curl php-mbstring php-xml php-zip -y

# Instalar MySQL
sudo apt install mysql-server -y

# Instalar herramientas adicionales
sudo apt install git curl unzip -y

# Configurar permisos
sudo chown -R www-data:www-data /var/www/html/
sudo chmod -R 755 /var/www/html/
```

### **Paso 2: Clonar/Subir el Proyecto**

```bash
# OpciÃ³n A: Clonar desde repositorio privado (requiere acceso)
git clone [URL_PRIVADA_DEL_REPOSITORIO] /var/www/html/minimarket

# OpciÃ³n B: Subir archivos manualmente via FTP/SFTP
# Subir todos los archivos a /var/www/html/

# Establecer permisos correctos
cd /var/www/html/minimarket
sudo chmod 777 -R uploads/
sudo chmod 644 -R *.php
sudo chmod 644 -R funciones/*.php
sudo chmod 644 -R admin/*.php
sudo chmod 644 -R paginas/*.php
```

### **Paso 3: Configurar Base de Datos**

```sql
-- Conectarse a MySQL
mysql -u root -p

-- Crear base de datos
CREATE DATABASE minimarket_db 
CHARACTER SET utf8mb4 
COLLATE utf8mb4_unicode_ci;

-- Crear usuario dedicado
CREATE USER 'minimarket_user'@'localhost' 
IDENTIFIED BY 'ContraseÃ±aSegura123!';

-- Otorgar privilegios
GRANT ALL PRIVILEGES ON minimarket_db.* 
TO 'minimarket_user'@'localhost';

-- Aplicar cambios
FLUSH PRIVILEGES;

-- Importar estructura inicial
USE minimarket_db;
SOURCE /ruta/completa/a/db.sql;

-- Verificar tablas creadas
SHOW TABLES;
```

### **Paso 4: Configurar Variables de Entorno**

Crear archivo `.env` en la raÃ­z del proyecto:

```env
# ============================================
# CONFIGURACIÃ“N DE BASE DE DATOS
# ============================================
DB_HOST=localhost
DB_PORT=3306
DB_NAME=minimarket_db
DB_USER=minimarket_user
DB_PASSWORD=ContraseÃ±aSegura123!

# ============================================
# CONFIGURACIÃ“N DEL SITIO
# ============================================
SITE_NAME=Mi Minimarket
SITE_URL=http://localhost/minimarket
DEFAULT_CURRENCY=USD
TIMEZONE=America/Caracas
LANGUAGE=es_VE

# ============================================
# TASA DE CAMBIO Y MONEDAS
# ============================================
EXCHANGE_RATE=36.50
ENABLE_AUTO_RATE_UPDATE=0
RATE_UPDATE_SOURCE=bcv  # bcv, paralelo, fixer

# ============================================
# CONFIGURACIÃ“N DE IMPRESIÃ“N
# ============================================
PRINTER_NAME=Gezhi_Thermal
PRINTER_WIDTH=80  # caracteres por lÃ­nea
PRINT_KITCHEN_TICKET=1
PRINT_CUSTOMER_TICKET=1
PRINT_AUTOMATICALLY=1

# ============================================
# CONFIGURACIÃ“N DE EMAIL (OPCIONAL)
# ============================================
SMTP_ENABLED=0
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=tu_email@gmail.com
SMTP_PASSWORD=tu_app_password
SMTP_ENCRYPTION=tls
EMAIL_FROM=noreply@minimarket.com

# ============================================
# SEGURIDAD Y SESIONES
# ============================================
SESSION_TIMEOUT=3600  # segundos
MAX_LOGIN_ATTEMPTS=5
MIN_PASSWORD_LENGTH=8
ENABLE_HTTPS=0  # Cambiar a 1 si usa SSL

# ============================================
# BACKUP Y MANTENIMIENTO
# ============================================
AUTO_BACKUP=1
BACKUP_DAYS_TO_KEEP=30
BACKUP_TIME=02:00

# ============================================
# CONFIGURACIONES AVANZADAS
# ============================================
DEBUG_MODE=0
LOG_LEVEL=error  # debug, info, warning, error
CACHE_ENABLED=1
```

### **Paso 5: Configurar Apache Virtual Host**

```apache
# /etc/apache2/sites-available/minimarket.conf
<VirtualHost *:80>
    ServerName minimarket.local
    ServerAdmin admin@minimarket.com
    DocumentRoot /var/www/html/minimarket
    
    <Directory /var/www/html/minimarket>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Seguridad bÃ¡sica
        <FilesMatch "\.(env|log|sql)$">
            Require all denied
        </FilesMatch>
    </Directory>
    
    ErrorLog ${APACHE_LOG_DIR}/minimarket_error.log
    CustomLog ${APACHE_LOG_DIR}/minimarket_access.log combined
    
    # PHP settings
    php_value upload_max_filesize 10M
    php_value post_max_size 10M
    php_value max_execution_time 300
    php_value max_input_time 300
</VirtualHost>
```

```bash
# Habilitar el sitio
sudo a2ensite minimarket.conf
sudo a2enmod rewrite
sudo systemctl restart apache2
```

### **Paso 6: Configurar Impresora TÃ©rmica**

```bash
# Instalar CUPS si no estÃ¡ instalado
sudo apt install cups -y

# Agregar usuario web al grupo lpadmin
sudo usermod -a -G lpadmin www-data

# Configurar impresora (ejemplo para USB)
sudo lpadmin -p Gezhi_Thermal -E -v usb://GZ/Designer%20Series?serial=123456 -m drv:///sample.drv/generic.ppd

# Probar impresiÃ³n
echo "Test de impresion" | lp -d Gezhi_Thermal

# Verificar estado
lpstat -p -d
```

### **Paso 7: Configurar Cron Jobs**

```bash
# Editar crontab del usuario web
sudo crontab -u www-data -e

# Agregar las siguientes lÃ­neas:
# Backup diario a las 2 AM
0 2 * * * /usr/bin/php /var/www/html/minimarket/backup.php >/dev/null 2>&1

# Limpieza de sesiones antiguas cada hora
0 * * * * find /var/lib/php/sessions -type f -mmin +120 -delete

# ActualizaciÃ³n de tasa de cambio a las 8 AM
0 8 * * * /usr/bin/php /var/www/html/minimarket/update_rate.php >/dev/null 2>&1
```

### **Paso 8: Primer Acceso y ConfiguraciÃ³n Inicial**

1. **Acceder al sistema:** `http://tuserver.com/minimarket/`
2. **Crear primer usuario administrador:**
   - Ir a: `http://tuserver.com/minimarket/paginas/register.php`
   - Completar formulario (el primer usuario se crea como administrador automÃ¡ticamente)
   - O usar credenciales por defecto si se importÃ³ db.sql con datos demo

3. **Configurar mÃ©todos de pago:**
   - Acceder como administrador
   - Ir a: Admin â†’ TesorerÃ­a â†’ Verificar mÃ©todos de pago
   - Asegurarse que existan: Efectivo USD, Efectivo VES, Transferencias

4. **Configurar tasa de cambio inicial:**
   - En Dashboard administrativo, actualizar tasa BCV/Paralelo
   - Esto recalcularÃ¡ automÃ¡ticamente todos los precios en Bs

5. **Realizar primera apertura de caja:**
   - Iniciar sesiÃ³n como cajero
   - Ir a: PÃ¡ginas â†’ Apertura de Caja
   - Registrar fondo inicial en USD y Bs segÃºn disponibilidad

## ğŸ“ Estructura Completa del Proyecto

```
Minimarcket/
â”‚
â”œâ”€â”€ ğŸ“ admin/                           # Panel administrativo completo
â”‚   â”œâ”€â”€ add_product.php                # Formulario agregar productos
â”‚   â”œâ”€â”€ add_purchase_order.php         # Registrar compra a proveedor
â”‚   â”œâ”€â”€ add_purchase_receipt.php       # RecepciÃ³n de mercancÃ­a
â”‚   â”œâ”€â”€ add_supplier.php               # Agregar nuevo proveedor
â”‚   â”œâ”€â”€ agregar_usuario.php            # Crear nuevo usuario
â”‚   â”œâ”€â”€ caja_chica.php                 # TesorerÃ­a y bÃ³veda central
â”‚   â”œâ”€â”€ compras.php                    # Listado y gestiÃ³n de compras
â”‚   â”œâ”€â”€ configurar_receta.php          # Configurar recetas de productos
â”‚   â”œâ”€â”€ delete_product.php             # Eliminar producto (con confirmaciÃ³n)
â”‚   â”œâ”€â”€ delete_purchase_order.php      # Eliminar orden de compra
â”‚   â”œâ”€â”€ delete_supplier.php            # Eliminar proveedor
â”‚   â”œâ”€â”€ edit_product.php               # Editar producto existente
â”‚   â”œâ”€â”€ edit_purchase_order.php        # Modificar orden de compra
â”‚   â”œâ”€â”€ edit_supplier.php              # Editar datos de proveedor
â”‚   â”œâ”€â”€ editar_usuario.php             # Modificar usuario
â”‚   â”œâ”€â”€ editar_venta.php               # Editar estado de venta
â”‚   â”œâ”€â”€ eliminar_usuario.php           # Eliminar usuario (con confirmaciÃ³n)
â”‚   â”œâ”€â”€ index.php                      # Dashboard administrativo principal
â”‚   â”œâ”€â”€ insumos.php                    # GestiÃ³n de materias primas
â”‚   â”œâ”€â”€ manufactura.php                # ProducciÃ³n y recetas cocina
â”‚   â”œâ”€â”€ process_purchase_order.php     # Procesar Ã³rdenes de compra
â”‚   â”œâ”€â”€ process_purchase_receipt.php   # Procesar recepciÃ³n
â”‚   â”œâ”€â”€ process_supplier.php           # Procesar proveedores
â”‚   â”œâ”€â”€ productos.php                  # GestiÃ³n completa de inventario
â”‚   â”œâ”€â”€ proveedores.php                # Listado de proveedores
â”‚   â”œâ”€â”€ reportes_caja.php              # AuditorÃ­a de cierres de caja
â”‚   â”œâ”€â”€ reportes.php                   # Reportes financieros y rentabilidad
â”‚   â”œâ”€â”€ usuarios.php                   # GestiÃ³n de usuarios y roles
â”‚   â”œâ”€â”€ ventas.php                     # Historial y gestiÃ³n de ventas
â”‚   â”œâ”€â”€ ver_cierre.php                 # Detalle de cierre de caja
â”‚   â””â”€â”€ ver_venta.php                  # Detalle completo de venta
â”‚
â”œâ”€â”€ ğŸ“ ajax/                           # Endpoints para operaciones AJAX
â”‚   â”œâ”€â”€ get_cart_item.php              # Obtener detalles de Ã­tem del carrito
â”‚   â””â”€â”€ imprimir_ticket.php            # Endpoint para impresiÃ³n de tickets
â”‚
â”œâ”€â”€ ğŸ“ datos/                          # Datos estÃ¡ticos y archivos de configuraciÃ³n
â”‚   â””â”€â”€ productos.json                 # CatÃ¡logo de productos demo (opcional)
â”‚
â”œâ”€â”€ ğŸ“ funciones/                      # NÃºcleo lÃ³gico - Clases y Managers
â”‚   â”œâ”€â”€ CartManager.php                # GestiÃ³n completa del carrito de compras
â”‚   â”œâ”€â”€ CashRegisterManager.php        # GestiÃ³n de caja diaria y cuadres
â”‚   â”œâ”€â”€ Config.php                     # ConfiguraciÃ³n global del sistema
â”‚   â”œâ”€â”€ conexion.php                   # ConexiÃ³n a base de datos (singleton)
â”‚   â”œâ”€â”€ EmailController.php            # Controlador de envÃ­o de correos
â”‚   â”œâ”€â”€ ExchangeRate.php               # GestiÃ³n de tasa de cambio
â”‚   â”œâ”€â”€ Menus.php                      # GestiÃ³n de menÃºs de navegaciÃ³n
â”‚   â”œâ”€â”€ OrderManager.php               # GestiÃ³n completa de Ã³rdenes/ventas
â”‚   â”œâ”€â”€ PrinterHelper.php              # Servicio de impresiÃ³n de tickets
â”‚   â”œâ”€â”€ ProductionManager.php          # GestiÃ³n de producciÃ³n y recetas
â”‚   â”œâ”€â”€ ProductManager.php             # GestiÃ³n centralizada de productos
â”‚   â”œâ”€â”€ PurchaseOrderManager.php       # GestiÃ³n de Ã³rdenes de compra
â”‚   â”œâ”€â”€ PurchaseReceiptManager.php     # GestiÃ³n de recepciÃ³n de compras
â”‚   â”œâ”€â”€ RawMaterialManager.php         # GestiÃ³n de materias primas
â”‚   â”œâ”€â”€ SupplierManager.php            # GestiÃ³n de proveedores
â”‚   â”œâ”€â”€ TransactionManager.php         # GestiÃ³n de transacciones financieras
â”‚   â”œâ”€â”€ UserManager.php                # GestiÃ³n de usuarios y autenticaciÃ³n
â”‚   â””â”€â”€ VaultManager.php               # GestiÃ³n de bÃ³veda/tesorerÃ­a central
â”‚
â”œâ”€â”€ ğŸ“ paginas/                        # Frontend - PÃ¡ginas operativas
â”‚   â”œâ”€â”€ apertura_caja.php              # Apertura de caja diaria
â”‚   â”œâ”€â”€ carrito.php                    # Carrito de compras y modificaciones
â”‚   â”œâ”€â”€ checkout.php                   # Proceso final de pago
â”‚   â”œâ”€â”€ cierre_caja.php                # Cierre de caja y cuadre
â”‚   â”œâ”€â”€ contacto.php                   # PÃ¡gina de contacto
â”‚   â”œâ”€â”€ despacho.php                   # GestiÃ³n de entregas (opcional)
â”‚   â”œâ”€â”€ index.php                      # PÃ¡gina principal pÃºblica
â”‚   â”œâ”€â”€ kds_tv.php                     # Pantalla de cocina (Kitchen Display)
â”‚   â”œâ”€â”€ login.php                      # Inicio de sesiÃ³n
â”‚   â”œâ”€â”€ logout.php                     # Cierre de sesiÃ³n
â”‚   â”œâ”€â”€ nosotros.php                   # PÃ¡gina "Nosotros"
â”‚   â”œâ”€â”€ password_reset.php             # RecuperaciÃ³n de contraseÃ±a
â”‚   â”œâ”€â”€ perfil.php                     # Perfil de usuario
â”‚   â”œâ”€â”€ privacidad.php                 # PolÃ­tica de privacidad
â”‚   â”œâ”€â”€ process_checkout.php           # Procesamiento del pago
â”‚   â”œâ”€â”€ register.php                   # Registro de nuevos usuarios
â”‚   â”œâ”€â”€ soporte.php                    # PÃ¡gina de soporte
â”‚   â”œâ”€â”€ status.php                     # Estado del sistema
â”‚   â”œâ”€â”€ terminos.php                   # TÃ©rminos y condiciones
â”‚   â”œâ”€â”€ ticket.php                     # VisualizaciÃ³n de ticket
â”‚   â””â”€â”€ tienda.php                     # Punto de venta principal (POS)
â”‚
â”œâ”€â”€ ğŸ“ templates/                      # Plantillas reutilizables
â”‚   â”œâ”€â”€ autoload.php                   # Carga automÃ¡tica de dependencias
â”‚   â”œâ”€â”€ footer.php                     # Pie de pÃ¡gina comÃºn
â”‚   â”œâ”€â”€ header.php                     # Cabecera comÃºn con menÃºs
â”‚   â””â”€â”€ menu.php                       # Sistema de menÃºs de navegaciÃ³n
â”‚
â”œâ”€â”€ ğŸ“ tv/                             # Pantallas secundarias y displays
â”‚   â””â”€â”€ index.html                     # Pantalla de informaciÃ³n/publicidad
â”‚
â”œâ”€â”€ ğŸ“ uploads/                        # Archivos subidos por usuarios
â”‚   â””â”€â”€ product_images/                # ImÃ¡genes de productos
â”‚       â””â”€â”€ default.jpg                # Imagen por defecto
â”‚
â”œâ”€â”€ .env.example                       # Ejemplo de variables de entorno
â”œâ”€â”€ .htaccess                          # Reglas de Apache (URLs amigables, seguridad)
â”œâ”€â”€ backup.php                         # Script de backup automÃ¡tico
â”œâ”€â”€ composer.json                      # Dependencias PHP (si aplica)
â”œâ”€â”€ db.sql                             # Esquema completo de base de datos
â”œâ”€â”€ index.php                          # Punto de entrada principal
â”œâ”€â”€ LICENSE                            # Licencia propietaria
â”œâ”€â”€ README.md                          # Este archivo
â””â”€â”€ update_rate.php                    # Script de actualizaciÃ³n de tasa
```

## ğŸ” ConfiguraciÃ³n de Seguridad

### **1. ConfiguraciÃ³n de Apache (.htaccess)**
```apache
# ProtecciÃ³n de archivos sensibles
<FilesMatch "\.(env|sql|log|json)$">
    Order allow,deny
    Deny from all
</FilesMatch>

# Prevenir listado de directorios
Options -Indexes

# Proteger directorios especÃ­ficos
<Directory "/funciones">
    Order deny,allow
    Deny from all
    Allow from 127.0.0.1
</Directory>

# RedirecciÃ³n HTTPS (si estÃ¡ configurado)
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]

# Prevenir acceso directo a includes
RewriteCond %{REQUEST_URI} \.php$
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [F,L,NC]
```

### **2. ConfiguraciÃ³n de PHP (php.ini)**
```ini
; Seguridad bÃ¡sica
expose_php = Off
display_errors = Off
log_errors = On
error_log = /var/log/php_errors.log

; LÃ­mites de ejecuciÃ³n
max_execution_time = 300
max_input_time = 300
memory_limit = 256M

; Subida de archivos
upload_max_filesize = 10M
post_max_size = 12M

; Sesiones
session.cookie_httponly = 1
session.cookie_secure = 1  ; Habilitar si usa HTTPS
session.use_strict_mode = 1
session.gc_maxlifetime = 3600
```

### **3. ConfiguraciÃ³n de MySQL**
```sql
-- PolÃ­ticas de contraseÃ±as
SET GLOBAL validate_password.policy = MEDIUM;
SET GLOBAL validate_password.length = 12;
SET GLOBAL validate_password.number_count = 2;
SET GLOBAL validate_password.special_char_count = 1;

-- Remover usuarios anÃ³nimos
DELETE FROM mysql.user WHERE User='';

-- Remover acceso root remoto
DELETE FROM mysql.user WHERE User='root' AND Host NOT IN ('localhost', '127.0.0.1', '::1');

-- Aplicar cambios
FLUSH PRIVILEGES;
```

### **4. ConfiguraciÃ³n de Firewall (UFW - Ubuntu)**
```bash
# Habilitar firewall
sudo ufw enable

# Reglas bÃ¡sicas
sudo ufw allow 22/tcp        # SSH
sudo ufw allow 80/tcp        # HTTP
sudo ufw allow 443/tcp       # HTTPS
sudo ufw allow 3306/tcp      # MySQL (solo si acceso remoto necesario)

# Denegar todo lo demÃ¡s
sudo ufw default deny incoming
sudo ufw default allow outgoing

# Ver estado
sudo ufw status verbose
```

## ğŸ“– GuÃ­a de Uso BÃ¡sico

### **ğŸŸ¢ Para Cajeros/Nuevos Usuarios**

#### **Inicio del DÃ­a:**
1. **Acceder al sistema:** `http://tudominio.com/paginas/login.php`
2. **Abrir caja:** `PÃ¡ginas â†’ Apertura de Caja`
   - Ingresar fondo inicial en USD y Bs (segÃºn lo disponible)
   - Confirmar apertura
3. **Acceder al POS:** `PÃ¡ginas â†’ Tienda`

#### **Proceso de Venta:**
1. **Seleccionar productos:**
   - Buscar por nombre o categorÃ­a
   - Click en producto para agregar al carrito
   - Para productos preparados, aparecerÃ¡n opciones de modificaciÃ³n

2. **Modificar productos (si aplica):**
   - Click en "Modificar" junto al producto en carrito
   - Seleccionar consumo: MESA o LLEVAR
   - Remover ingredientes no deseados (SIN ...)
   - Agregar extras disponibles (+ ...)
   - AÃ±adir nota especial si es necesario
   - Guardar modificaciones

3. **Finalizar venta:**
   - Click en "Pagar" en carrito
   - Verificar total en USD y Bs
   - Seleccionar mÃ©todo(s) de pago
   - Ingresar monto recibido (sistema calcula vuelto automÃ¡tico)
   - Confirmar pago

4. **Entrega:**
   - Sistema imprime automÃ¡ticamente:
     - Ticket para cliente (con total y detalles de pago)
     - Ticket para cocina (con modificaciones y especificaciones)
   - Entregar producto(s) al cliente
   - Para pedidos "LLEVAR", incluir empaques necesarios

#### **Cierre de Turno:**
1. **Acceder a cierre:** `PÃ¡ginas â†’ Cierre de Caja`
2. **Contar efectivo fÃ­sico:**
   - Ingresar dÃ³lares contados
   - Ingresar bolÃ­vares contados
3. **Verificar diferencia:**
   - Sistema muestra diferencia automÃ¡ticamente
   - Si hay diferencia significativa (>$0.50 o >50Bs), investigar
4. **Confirmar cierre:**
   - Sistema genera reporte detallado
   - Efectivo se transfiere automÃ¡ticamente a bÃ³veda central
   - Turno queda registrado para auditorÃ­a

### **ğŸ”´ Para Administradores**

#### **GestiÃ³n Diaria:**
1. **Revisar dashboard:** `Admin â†’ Dashboard`
   - Ventas del dÃ­a, semana, mes
   - Estado de caja y bÃ³veda
   - Alertas de stock bajo
   - Pedidos pendientes

2. **GestiÃ³n de Inventario:**
   - `Admin â†’ Productos`: Agregar, editar, eliminar productos
   - `Admin â†’ Insumos`: Control de materias primas
   - `Admin â†’ Configurar Receta`: Para productos preparados

3. **Control Financiero:**
   - `Admin â†’ TesorerÃ­a`: Movimientos de bÃ³veda, depÃ³sitos, retiros
   - `Admin â†’ Reportes`: AnÃ¡lisis de rentabilidad, ventas por mÃ©todo, etc.
   - `Admin â†’ AuditorÃ­a de Caja`: Revisar cierres de cajeros

#### **Compras a Proveedores:**
1. **Crear orden de compra:** `Admin â†’ Compras â†’ Nueva Compra`
   - Seleccionar proveedor
   - Agregar productos, cantidades, precios unitarios
   - Seleccionar mÃ©todo de pago (si es efectivo, descuenta de bÃ³veda)
   - Confirmar orden

2. **Recibir mercancÃ­a:** `Admin â†’ Compras â†’ Recibir MercancÃ­a`
   - Seleccionar orden pendiente
   - Confirmar recepciÃ³n (actualiza stock automÃ¡ticamente)
   - Sistema recalcula precios de venta basado en nuevos costos

#### **ProducciÃ³n:**
1. **Elaborar productos:** `Admin â†’ Manufactura`
   - Seleccionar producto a producir
   - Ingresar cantidad
   - Confirmar producciÃ³n (descuenta ingredientes, actualiza stock)

#### **Usuarios:**
1. **GestiÃ³n de personal:** `Admin â†’ Usuarios`
   - Agregar nuevos usuarios (cajeros, administradores)
   - Editar datos existentes
   - Eliminar usuarios (con confirmaciÃ³n)

## ğŸ”„ Flujos de Trabajo Completos

### **Flujo 1: Venta de Producto Simple**
```
Cliente selecciona producto â†’ Agregar al carrito â†’ Ir a pagar â†’ 
Seleccionar mÃ©todo de pago â†’ Ingresar monto â†’ Sistema calcula vuelto â†’ 
Confirmar â†’ Imprimir ticket â†’ Descontar stock â†’ Registrar transacciÃ³n â†’ 
Actualizar caja del cajero
```

### **Flujo 2: Venta de Producto Preparado con Modificaciones**
```
Cliente selecciona pizza â†’ Agregar al carrito â†’ Modificar â†’ 
Seleccionar LLEVAR â†’ Quitar cebolla â†’ Agregar tocineta extra â†’ 
Guardar â†’ Ir a pagar â†’ Pago mixto (50% efectivo, 50% transferencia) â†’ 
Confirmar â†’ Imprimir tickets (cliente + cocina) â†’ 
Descontar ingredientes segÃºn receta modificada â†’ Registrar transacciones mÃºltiples â†’ 
Actualizar caja y bÃ³veda segÃºn mÃ©todos de pago
```

### **Flujo 3: Compra a Proveedor y RecepciÃ³n**
```
Crear orden de compra a proveedor â†’ Agregar 10 unidades de producto X a $5 c/u â†’ 
Pago con efectivo USD â†’ Confirmar (descuenta $50 de bÃ³veda) â†’ 
Proveedor entrega mercancÃ­a â†’ Registrar recepciÃ³n â†’ 
Aumentar stock en 10 unidades â†’ Recalcular precio de venta basado en nuevo costo â†’ 
Producto disponible para venta
```

### **Flujo 4: ProducciÃ³n Interna**
```
Verificar stock bajo de masa para pizza â†’ Ir a manufactura â†’ 
Seleccionar "Masa Pizza" â†’ Producir 5kg â†’ 
Sistema descuenta harina, agua, levadura, etc. â†’ 
Aumenta stock de masa en 5kg â†’ Actualiza costo promedio â†’ 
Masa disponible para preparar pizzas
```

### **Flujo 5: Cierre Diario y Cuadre**
```
Finalizar turno â†’ Ir a cierre de caja â†’ 
Contar efectivo fÃ­sico: $350 USD, 12,500 Bs â†’ 
Ingresar montos â†’ Sistema calcula: 
  - Esperado: $345.50 USD, 12,450 Bs  
  - Diferencia: +$4.50 USD, +50 Bs â†’ 
Analizar diferencias (vueltos no registrados, errores) â†’ 
Confirmar cierre â†’ Sistema transfiere a bÃ³veda â†’ 
Genera reporte auditado â†’ Fin de turno
```

## ğŸ“Š Estructura de Base de Datos

### **Tablas Principales:**

#### **1. Core del Sistema**
- **users:** Usuarios del sistema (admin, cajeros)
- **products:** CatÃ¡logo de productos (simples, preparados, combos)
- **product_components:** Recetas de productos preparados
- **product_valid_extras:** Extras permitidos por producto
- **raw_materials:** Materias primas e insumos
- **manufactured_products:** Productos de cocina intermedios

#### **2. Ventas y Ã“rdenes**
- **orders:** Encabezado de ventas/pedidos
- **order_items:** Detalle de productos vendidos
- **order_item_modifiers:** Modificaciones por Ã­tem
- **cart:** Carrito temporal de compras
- **cart_item_modifiers:** Modificaciones en carrito

#### **3. TesorerÃ­a y Finanzas**
- **cash_sessions:** Sesiones de caja por usuario
- **transactions:** Transacciones financieras (ingresos/egresos)
- **payment_methods:** MÃ©todos de pago configurados
- **vault_movements:** Movimientos de bÃ³veda central
- **global_config:** ConfiguraciÃ³n del sistema

#### **4. Compras y Proveedores**
- **suppliers:** Proveedores del negocio
- **purchase_orders:** Ã“rdenes de compra
- **purchase_order_items:** Detalle de compras
- **purchase_receipts:** RecepciÃ³n de mercancÃ­a

#### **5. ProducciÃ³n**
- **production_recipes:** Recetas de producciÃ³n
- **production_orders:** Ã“rdenes de producciÃ³n

### **Relaciones Clave:**
- `orders.user_id` â†’ `users.id` (Venta pertenece a usuario)
- `order_items.order_id` â†’ `orders.id` (Ãtems pertenecen a orden)
- `transactions.cash_session_id` â†’ `cash_sessions.id` (TransacciÃ³n en sesiÃ³n)
- `product_components.product_id` â†’ `products.id` (Componentes de producto)
- `purchase_orders.supplier_id` â†’ `suppliers.id` (Compra a proveedor)

## ğŸ›¡ï¸ Seguridad y AuditorÃ­a

### **CaracterÃ­sticas de Seguridad Implementadas:**

#### **AutenticaciÃ³n:**
- Hash SHA256 para contraseÃ±as
- Salting automÃ¡tico
- Bloqueo tras 5 intentos fallidos
- Sesiones con timeout configurable
- RegeneraciÃ³n de ID de sesiÃ³n

#### **AutorizaciÃ³n:**
- Control por roles (admin, user)
- VerificaciÃ³n en cada acceso administrativo
- Middleware de autenticaciÃ³n en includes
- RedirecciÃ³n automÃ¡tica a login si no autenticado

#### **ProtecciÃ³n de Datos:**
- Prepared statements PDO en todas las consultas
- Escape de salidas HTML (htmlspecialchars)
- ValidaciÃ³n de tipos y rangos en formularios
- SanitizaciÃ³n de entradas de usuario

#### **AuditorÃ­a:**
- Log de todas las transacciones financieras
- Registro de cierres de caja con diferencias
- Historial de movimientos de bÃ³veda
- Trazabilidad de modificaciones crÃ­ticas

#### **Seguridad de Archivos:**
- .htaccess protegiendo archivos sensibles
- ValidaciÃ³n de tipos MIME en uploads
- Renombrado Ãºnico para archivos subidos
- Directivas anti-directory-listing

### **PrÃ¡cticas Recomendadas Adicionales:**

1. **Certificado SSL:** Implementar HTTPS para todo el trÃ¡fico
2. **WAF (Web Application Firewall):** ModSecurity o similar
3. **Backups Encriptados:** GPG para backups fuera del servidor
4. **Monitoreo de Logs:** Herramientas como Fail2ban
5. **Actualizaciones Regulares:** Parches de seguridad para OS y software

## âš¡ OptimizaciÃ³n y Rendimiento

### **Optimizaciones Implementadas:**

#### **Base de Datos:**
- Ãndices en campos de bÃºsqueda frecuente
- NormalizaciÃ³n adecuada (hasta 3NF)
- Consultas optimizadas con EXPLAIN
- Limpieza programada de datos temporales

#### **PHP:**
- OPCache habilitado (recomendado)
- Autoloading eficiente
- MinimizaciÃ³n de includes innecesarios
- Cache de consultas frecuentes

#### **Frontend:**
- Bootstrap local (sin CDN)
- JavaScript modular y optimizado
- ImÃ¡genes comprimidas y en tamaÃ±o adecuado
- MinificaciÃ³n de CSS/JS (pendiente)

### **Recomendaciones para Alto TrÃ¡fico:**

1. **CachÃ©:** Implementar Memcached o Redis para:
   - CatÃ¡logo de productos
   - Precios y tasas
   - Datos de configuraciÃ³n

2. **CDN:** Para assets estÃ¡ticos si hay mÃºltiples ubicaciones

3. **Balance de Carga:** Nginx como reverse proxy + mÃºltiples instancias PHP-FPM

4. **ReplicaciÃ³n de BD:** Master-slave para lecturas frecuentes

5. **CompresiÃ³n:** Gzip/Brotli para transferencias

## ğŸš¨ SoluciÃ³n de Problemas

### **Problemas Comunes y Soluciones:**

#### **1. Error de ConexiÃ³n a Base de Datos**
```
SÃ­ntoma: "Error de conexiÃ³n" o pÃ¡gina en blanco
SoluciÃ³n:
  1. Verificar .env (DB_HOST, DB_USER, DB_PASSWORD)
  2. Comprobar que MySQL estÃ© corriendo: sudo systemctl status mysql
  3. Verificar permisos de usuario: mysql -u [usuario] -p
  4. Revisar firewall: sudo ufw status
```

#### **2. Stock No Coincide**
```
SÃ­ntoma: Cantidades en sistema diferentes a fÃ­sico
SoluciÃ³n:
  1. Verificar tipo de producto (simple vs preparado)
  2. Revisar recepciones de compra pendientes
  3. AuditorÃ­a de transacciones: Admin â†’ Reportes
  4. Verificar producciones no registradas
  5. Revisar Ã³rdenes canceladas no restauradas
```

#### **3. ImpresiÃ³n No Funciona**
```
SÃ­ntoma: Tickets no se imprimen, error en consola
SoluciÃ³n:
  1. Verificar CUPS: lpstat -p
  2. Probar impresiÃ³n directa: echo "test" | lp -d [nombre]
  3. Permisos: sudo usermod -a -G lpadmin www-data
  4. Reiniciar servicios: sudo systemctl restart cups apache2
  5. Verificar papel y conexiÃ³n de impresora
```

#### **4. Caja No Cuadra**
```
SÃ­ntoma: Diferencia significativa en cierre
SoluciÃ³n:
  1. Verificar apertura correcta (fondo inicial registrado)
  2. Revisar ventas anuladas no procesadas correctamente
  3. Comprobar mÃ©todo de pago en ventas (efectivo vs transferencia)
  4. Verificar vueltos registrados como transacciones
  5. AuditorÃ­a completa de transacciones del dÃ­a
```

#### **5. Lentitud del Sistema**
```
SÃ­ntoma: PÃ¡ginas cargan lentamente
SoluciÃ³n:
  1. Verificar logs de error PHP y Apache
  2. Optimizar consultas lentas (habilitar slow query log)
  3. Revisar uso de memoria: free -h
  4. Limpiar sesiones antiguas
  5. Considerar upgrade de hardware si persistente
```

### **Procedimientos de RecuperaciÃ³n:**

#### **RecuperaciÃ³n de Backup:**
```bash
# 1. Detener trÃ¡fico al sistema
sudo systemctl stop apache2

# 2. Restaurar base de datos
mysql -u root -p minimarket_db < backup_YYYYMMDD.sql

# 3. Restaurar archivos (si necesario)
tar -xzf backup_completo_YYYYMMDD.tar.gz -C /var/www/html/

# 4. Restaurar permisos
chown -R www-data:www-data /var/www/html/minimarket
chmod -R 755 /var/www/html/minimarket
chmod 777 /var/www/html/minimarket/uploads/

# 5. Reinciar servicios
sudo systemctl start apache2 mysql
```

#### **RecuperaciÃ³n de ContraseÃ±a de Administrador:**
```sql
-- Si se olvida contraseÃ±a de admin
UPDATE users 
SET password = SHA2('nueva_contraseÃ±a_temporal', 256) 
WHERE email = 'admin@email.com';

-- Luego cambiar desde el perfil una vez logeado
```

## ğŸ”§ Mantenimiento Regular

### **Diario:**
- [ ] Verificar backups automÃ¡ticos
- [ ] Revisar logs de errores
- [ ] Monitorear espacio en disco
- [ ] Verificar cierres de caja completos

### **Semanal:**
- [ ] Optimizar tablas de base de datos
- [ ] Limpiar sesiones y datos temporales
- [ ] Revisar y actualizar tasas de cambio
- [ ] Verificar stock crÃ­tico y hacer pedidos

### **Mensual:**
- [ ] Actualizar software del servidor (security patches)
- [ ] Revisar y rotar logs
- [ ] AuditorÃ­a completa de transacciones
- [ ] AnÃ¡lisis de reportes de rentabilidad
- [ ] Verificar integridad de backups

### **Anual:**
- [ ] AuditorÃ­a de seguridad completa
- [ ] RevisiÃ³n de permisos y usuarios
- [ ] ActualizaciÃ³n mayor del sistema (si aplica)
- [ ] CapacitaciÃ³n de personal nuevo

## ğŸ“ Soporte y Contacto

### **Canales de Soporte:**

#### **Soporte TÃ©cnico Inmediato:**
- **TelÃ©fono:** [+58 424-6746570]
- **Email:** [robertopv24@gmail.com]
- **WhatsApp:** [+58 424-6746570]

#### **Soporte por Ticket:**
- Sistema integrado de tickets (en desarrollo)
- Respuesta en 24-48 horas hÃ¡biles

#### **DocumentaciÃ³n Adicional:**
- Manual de usuario completo (PDF disponible)
- Video-tutoriales de operaciÃ³n bÃ¡sica
- FAQs y soluciones comunes en wiki interna

### **Horarios de Soporte:**
- **Lunes a Viernes:** 8:00 AM - 6:00 PM
- **SÃ¡bados:** 9:00 AM - 1:00 PM
- **Emergencias:** 24/7 para caÃ­das crÃ­ticas del sistema

### **PolÃ­tica de Actualizaciones:**
- **Parches de Seguridad:** AplicaciÃ³n inmediata
- **Actualizaciones Menores:** Cada 3-6 meses
- **Actualizaciones Mayores:** Anuales o segÃºn necesidad
- **NotificaciÃ³n:** 15 dÃ­as previos a actualizaciones que afecten flujos

### **Servicios Profesionales Disponibles:**
1. **InstalaciÃ³n y ConfiguraciÃ³n:** Presencial o remota
2. **CapacitaciÃ³n de Personal:** On-site o virtual
3. **Desarrollo de Personalizaciones:** SegÃºn requerimientos
4. **MigraciÃ³n de Datos:** Desde otros sistemas
5. **Integraciones:** Con contabilidad, delivery apps, etc.
6. **Soporte Prioritario:** SLA con respuesta garantizada

## ğŸ”® Roadmap y Futuras Mejoras

### **PrÃ³xima VersiÃ³n (Q2 2026):**
- [ ] App mÃ³vil para toma de pedidos remotos
- [ ] IntegraciÃ³n con delivery (PedidosYa, Rappi)
- [ ] Sistema de fidelizaciÃ³n de clientes
- [ ] Reportes grÃ¡ficos mÃ¡s avanzados
- [ ] Notificaciones push para stock bajo

### **VersiÃ³n 3.0 (Q4 2026):**
- [ ] Multi-sucursal con sincronizaciÃ³n en tiempo real
- [ ] App para inventario con cÃ³digo de barras
- [ ] IntegraciÃ³n con sistemas contables (Siigo, Sage)
- [ ] Dashboard predictivo con IA bÃ¡sica
- [ ] Sistema de turnos para empleados

### **Largo Plazo (2027+):**
- [ ] Plataforma completamente en la nube
- [ ] API pÃºblica para desarrolladores
- [ ] E-commerce integrado
- [ ] Business Intelligence avanzado
- [ ] Machine learning para predicciÃ³n de ventas

## ğŸ“„ InformaciÃ³n Legal y Compliance

### **Cumplimiento Normativo:**
- **LOPD/GDPR:** Datos personales de clientes y empleados protegidos
- **Normativas Fiscales:** Registro detallado para auditorÃ­as SUNAT/DIAN/SENIAT
- **FacturaciÃ³n ElectrÃ³nica:** Estructura preparada para integraciÃ³n
- **Retenciones:** CÃ¡lculo automÃ¡tico de impuestos (configurable por paÃ­s)

### **TÃ©rminos de Servicio:**
1. **Propiedad:** El software es propiedad intelectual del desarrollador
2. **Licencia:** Por establecimiento, no transferible
3. **Soporte:** Incluido por 12 meses desde instalaciÃ³n
4. **Actualizaciones:** Parches de seguridad incluidos, features nuevas pueden tener costo
5. **Responsabilidad:** Limitada a costo de la licencia

### **PolÃ­tica de Privacidad:**
- Datos de clientes solo para procesamiento de Ã³rdenes
- No se comparte informaciÃ³n con terceros sin consentimiento
- Derecho a olvido implementado (eliminaciÃ³n de datos personales)
- EncriptaciÃ³n de datos sensibles en trÃ¡nsito y en reposo

---

## âœ… Checklist de ImplementaciÃ³n

### **Pre-InstalaciÃ³n:**
- [ ] Servidor con requisitos mÃ­nimos confirmados
- [ ] Dominio y DNS configurados (opcional)
- [ ] Certificado SSL obtenido (altamente recomendado)
- [ ] Personal identificado (administrador, cajeros)
- [ ] Procedimientos operativos definidos

### **InstalaciÃ³n:**
- [ ] Base de datos creada e importada
- [ ] Archivos del sistema subidos
- [ ] Permisos de archivos configurados
- [ ] Variables de entorno establecidas
- [ ] Usuario administrador creado

### **ConfiguraciÃ³n:**
- [ ] MÃ©todos de pago configurados
- [ ] Tasa de cambio establecida
- [ ] Impresora configurada y probada
- [ ] Productos bÃ¡sicos cargados
- [ ] Proveedores principales registrados

### **Pruebas:**
- [ ] Login y autenticaciÃ³n funcionando
- [ ] Ventas de prueba completadas
- [ ] Cierre de caja probado
- [ ] ImpresiÃ³n de tickets verificada
- [ ] Backup y restore probados

### **Go-Live:**
- [ ] Personal capacitado
- [ ] Apertura de caja inicial realizada
- [ ] Sistema en producciÃ³n
- [ ] Monitoreo activado
- [ ] Soporte contactable

---

## ğŸ¯ ConclusiÃ³n

**Minimarket POS** es una soluciÃ³n completa, robusta y profesional para la gestiÃ³n de pequeÃ±os y medianos negocios en el sector de alimentos y venta minorista. Con mÃ¡s de 25,000 lÃ­neas de cÃ³digo cuidadosamente desarrolladas, el sistema ofrece:

- **Control total** sobre todas las operaciones del negocio
- **Seguridad financiera** con auditorÃ­a completa
- **Eficiencia operativa** mediante automatizaciÃ³n inteligente
- **Toma de decisiones informada** con reportes en tiempo real
- **Escalabilidad** para crecimiento futuro del negocio

Este sistema representa aÃ±os de experiencia en desarrollo de software empresarial y comprensiÃ³n profunda de las necesidades operativas de negocios de alimentos y retail.

---

**Â© 2025 [Roberto J. Perozo V.]. Todos los derechos reservados.**

*Este documento y el software descrito son propiedad intelectual. Queda prohibida cualquier forma de reproducciÃ³n, distribuciÃ³n o modificaciÃ³n sin autorizaciÃ³n expresa por escrito del propietario.*

**Ãšltima actualizaciÃ³n:** Diciembre 2025  
**VersiÃ³n del Sistema:** 2.0.0  
**Estado:** ProducciÃ³n - Estable
